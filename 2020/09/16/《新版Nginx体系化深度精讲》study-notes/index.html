<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="聂小涛的博客">
    <meta name="keyword" content="腾讯">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        《新版Nginx体系化深度精讲》study notes - AirCloud的博客 | AirCloud&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> sometimes code， sometimes design </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Xiaotao Nie</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#学习备注"><span class="toc-text">学习备注</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#初识Nginx"><span class="toc-text">初识Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#学习Nginx的三个理由"><span class="toc-text">学习Nginx的三个理由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#学习后收获"><span class="toc-text">学习后收获</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx概念"><span class="toc-text">Nginx概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx为什么出现并如此流行"><span class="toc-text">Nginx为什么出现并如此流行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx相较于Apache的优势"><span class="toc-text">Nginx相较于Apache的优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx处理请求过程"><span class="toc-text">Nginx处理请求过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三个常见应用场景"><span class="toc-text">三个常见应用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#优势特点"><span class="toc-text">优势特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单安装"><span class="toc-text">简单安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux信号量"><span class="toc-text">Linux信号量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#利用信号量管理Nginx进程"><span class="toc-text">利用信号量管理Nginx进程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reload重载配置文件的流程"><span class="toc-text">reload重载配置文件的流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx热部署"><span class="toc-text">Nginx热部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模块化设计机制"><span class="toc-text">模块化设计机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx编译安装配置参数"><span class="toc-text">Nginx编译安装配置参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定制编译安装Nginx"><span class="toc-text">定制编译安装Nginx</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Nginx配置文件结构"><span class="toc-text">Nginx配置文件结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件核心参数用法"><span class="toc-text">配置文件核心参数用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#main段核心参数"><span class="toc-text">main段核心参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events段核心参数"><span class="toc-text">events段核心参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#server-name"><span class="toc-text">server_name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#root-amp-alias"><span class="toc-text">root &amp; alias</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#location"><span class="toc-text">location</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#module"><span class="toc-text">module</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#stub-status"><span class="toc-text">stub_status</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#limit-conn"><span class="toc-text">limit_conn</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本功能"><span class="toc-text">基本功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用指令"><span class="toc-text">常用指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-conn-zone"><span class="toc-text">limit_conn_zone</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-conn-status"><span class="toc-text">limit_conn_status</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-conn-log-level"><span class="toc-text">limit_conn_log_level</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#limit-conn-1"><span class="toc-text">limit_conn</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#limit-req"><span class="toc-text">limit_req</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> sometimes code， sometimes design </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        《新版Nginx体系化深度精讲》study notes
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-09-16 15:34:52</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#Nginx" title="Nginx">Nginx</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#web-Server" title="web-Server">web-Server</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote>
<p>总结出自己的思维脑图</p>
</blockquote>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<ol>
<li>学习了慕课网的《新版Nginx体系化深度精讲，从青铜到王者的飞跃》课程，本篇文章是学习笔记。以便温习</li>
</ol>
</blockquote>
<h1 id="初识Nginx"><a href="#初识Nginx" class="headerlink" title="初识Nginx"></a>初识Nginx</h1><h2 id="学习Nginx的三个理由"><a href="#学习Nginx的三个理由" class="headerlink" title="学习Nginx的三个理由"></a>学习Nginx的三个理由</h2><blockquote>
<ol>
<li>应用广泛，大厂和小厂必用的WEB组件</li>
<li>前后端、运维必知必会技能之一</li>
<li>性能优化，进阶高级工程师</li>
</ol>
</blockquote>
<h2 id="学习后收获"><a href="#学习后收获" class="headerlink" title="学习后收获"></a>学习后收获</h2><blockquote>
<p>部署前端项目，反向代理nodejs</p>
<p>反向代理java、python等，负载均衡</p>
<p>协调前后端，故障排查，性能优化</p>
</blockquote>
<h2 id="Nginx概念"><a href="#Nginx概念" class="headerlink" title="Nginx概念"></a>Nginx概念</h2><p>​        Nginx* (engine x) 是一个高性能的<a href="https://baike.baidu.com/item/HTTP" target="_blank" rel="noopener">HTTP</a>和<a href="https://baike.baidu.com/item/反向代理/7793488" target="_blank" rel="noopener">反向代理</a>web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为<a href="https://baike.baidu.com/item/俄罗斯/125568" target="_blank" rel="noopener">俄罗斯</a>访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，第一个公开版本0.1.0发布于2004年10月4日。</p>
<p>​        其将<a href="https://baike.baidu.com/item/源代码" target="_blank" rel="noopener">源代码</a>以类BSD许可证的形式发布，因它的稳定性、丰富的功能集、示例配置文件和低系统资源的消耗而<a href="https://baike.baidu.com/item/闻名/2303308" target="_blank" rel="noopener">闻名</a>。2011年6月1日，nginx 1.0.4发布。</p>
<p>​        Nginx是一款<a href="https://baike.baidu.com/item/轻量级/10002835" target="_blank" rel="noopener">轻量级</a>的<a href="https://baike.baidu.com/item/Web/150564" target="_blank" rel="noopener">Web</a> 服务器/<a href="https://baike.baidu.com/item/反向代理/7793488" target="_blank" rel="noopener">反向代理</a>服务器及<a href="https://baike.baidu.com/item/电子邮件/111106" target="_blank" rel="noopener">电子邮件</a>（IMAP/POP3）代理服务器，在BSD-like 协议下发行。其特点是占有内存少，<a href="https://baike.baidu.com/item/并发/11024806" target="_blank" rel="noopener">并发</a>能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、<a href="https://baike.baidu.com/item/京东/210931" target="_blank" rel="noopener">京东</a>、<a href="https://baike.baidu.com/item/新浪/125692" target="_blank" rel="noopener">新浪</a>、<a href="https://baike.baidu.com/item/网易/185754" target="_blank" rel="noopener">网易</a>、<a href="https://baike.baidu.com/item/腾讯/112204" target="_blank" rel="noopener">腾讯</a>、<a href="https://baike.baidu.com/item/淘宝/145661" target="_blank" rel="noopener">淘宝</a>等。</p>
<h2 id="Nginx为什么出现并如此流行"><a href="#Nginx为什么出现并如此流行" class="headerlink" title="Nginx为什么出现并如此流行"></a>Nginx为什么出现并如此流行</h2><ul>
<li>互联网数据的快速增长</li>
<li>Apache请求处理的低效性</li>
</ul>
<h3 id="Nginx相较于Apache的优势"><a href="#Nginx相较于Apache的优势" class="headerlink" title="Nginx相较于Apache的优势"></a>Nginx相较于Apache的优势</h3><table>
<thead>
<tr>
<th style="text-align:center">Apache</th>
<th style="text-align:center">Nginx</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">一个进程处理一个请求</td>
<td style="text-align:center">一个进程处理多个请求</td>
</tr>
<tr>
<td style="text-align:center">阻塞式的</td>
<td style="text-align:center">非阻塞式的</td>
</tr>
</tbody>
</table>
<h2 id="Nginx处理请求过程"><a href="#Nginx处理请求过程" class="headerlink" title="Nginx处理请求过程"></a>Nginx处理请求过程</h2><p><img src="WechatIMG550.png" width="80%"></p>
<h2 id="三个常见应用场景"><a href="#三个常见应用场景" class="headerlink" title="三个常见应用场景"></a>三个常见应用场景</h2><ol>
<li>静态资源服务</li>
<li>反向代理服务</li>
<li>API服务</li>
</ol>
<h2 id="优势特点"><a href="#优势特点" class="headerlink" title="优势特点"></a>优势特点</h2><ul>
<li>高并发、高性能</li>
<li>扩展性好</li>
<li>异步非阻塞的事件驱动模型</li>
</ul>
<h2 id="简单安装"><a href="#简单安装" class="headerlink" title="简单安装"></a>简单安装</h2><ul>
<li>linux环境准备</li>
</ul>
<blockquote>
<p>Centos7</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release -y</span><br><span class="line"></span><br><span class="line">yum -y install gcc gcc-c++ autoconf pcre pcre-devel make automake</span><br><span class="line"></span><br><span class="line">yum -y install wget httpd-tools vim</span><br><span class="line"></span><br><span class="line">yum list all | grep nginx</span><br><span class="line"></span><br><span class="line">yum install nginx -y</span><br><span class="line"></span><br><span class="line"># 列出包里的所有文件</span><br><span class="line">rpm -ql nginx</span><br><span class="line"></span><br><span class="line">rpm -ql nginx | grep bin</span><br></pre></td></tr></table></figure>
<h2 id="Linux信号量"><a href="#Linux信号量" class="headerlink" title="Linux信号量"></a>Linux信号量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 列出linux所有信号量</span><br><span class="line">kill -l</span><br></pre></td></tr></table></figure>
<h2 id="利用信号量管理Nginx进程"><a href="#利用信号量管理Nginx进程" class="headerlink" title="利用信号量管理Nginx进程"></a>利用信号量管理Nginx进程</h2><ul>
<li>Master进程</li>
</ul>
<p><img src="WechatIMG606.png" width="80%"></p>
<ul>
<li>Woker进程</li>
</ul>
<p><img src="WechatIMG607.png" width="80%"></p>
<ul>
<li>命令行</li>
</ul>
<p><img src="WechatIMG608.png" width="80%"></p>
<blockquote>
<p>Nginx会监测当前环境有几个cpu，就会启动几个woker进程（当nginx.conf 的 <strong>worker_processes</strong> 配置为 <code>auto</code>时，即没有指定<strong>worker_processes</strong>的数量时），每个worker进程都会绑定到一颗cpu上</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查看linux cpu 相关信息</span><br><span class="line">lscpu</span><br><span class="line"></span><br><span class="line"># 杀死（关闭）master进程</span><br><span class="line">kill -s SIGTERM pid[master进程pid]</span><br><span class="line"></span><br><span class="line"># 重新读取配置文件关闭旧的worker进程，开启新的worker进程</span><br><span class="line">kill -s SIGHUP pid[master进程pid]</span><br></pre></td></tr></table></figure>
<h2 id="reload重载配置文件的流程"><a href="#reload重载配置文件的流程" class="headerlink" title="reload重载配置文件的流程"></a>reload重载配置文件的流程</h2><ol>
<li>向master进程发送HUP信号（reload命令）</li>
<li>master进程检查配置语法是否正确</li>
<li>master进程打开监听端口</li>
<li>master进程使用新的配置文件启动新的worker子进程</li>
<li>master进程向老的woker子进程发送QUIT信号</li>
<li>旧的work进程关闭监听句柄，处理完当前连接后关闭进程</li>
</ol>
<p><img src="WechatIMG609.png" width="80%"></p>
<h2 id="Nginx热部署"><a href="#Nginx热部署" class="headerlink" title="Nginx热部署"></a>Nginx热部署</h2><ol>
<li>将旧的Nginx文件替换成新的Nginx文件</li>
<li>向mstaer进程发送USR2信号</li>
<li>master进程修改pid文件，加后缀.oldbin</li>
<li>master进程用新nginx文件启动新master进程</li>
<li>向旧的master进程发送WINCH信号，旧的worker子进程退出</li>
<li>回滚情形：向旧master发送HUP，向新的master发送QUIT</li>
</ol>
<p><img src="WechatIMG610.png" width="80%"></p>
<ul>
<li>Nginx热部署演示</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@sorozy run]# ps -ef | grep nginx</span><br><span class="line">root      1775     1  0 11:11 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx     1776  1775  0 11:11 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     1777  1775  0 11:11 ?        00:00:00 nginx: worker process</span><br><span class="line">root      2078  1460  0 11:21 pts/0    00:00:00 grep --color=auto nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@sorozy run]# kill -s SIGUSR2 1775</span><br><span class="line">[root@sorozy run]# </span><br><span class="line">[root@sorozy run]# ps -ef | grep nginx</span><br><span class="line">root      1775     1  0 11:11 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx     1776  1775  0 11:11 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     1777  1775  0 11:11 ?        00:00:00 nginx: worker process</span><br><span class="line">root      2146  1775  0 11:22 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx     2147  2146  0 11:22 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     2148  2146  0 11:22 ?        00:00:00 nginx: worker process</span><br><span class="line">root      2159  1460  0 11:22 pts/0    00:00:00 grep --color=auto nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@sorozy run]# kill -s SIGWINCH 1775</span><br><span class="line">[root@sorozy run]# </span><br><span class="line">[root@sorozy run]# ps -ef | grep nginx</span><br><span class="line">root      1775     1  0 11:11 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">root      2146  1775  0 11:22 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx     2147  2146  0 11:22 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     2148  2146  0 11:22 ?        00:00:00 nginx: worker process</span><br><span class="line">root      2201  1460  0 11:23 pts/0    00:00:00 grep --color=auto nginx</span><br><span class="line"></span><br><span class="line">##（1） 回滚</span><br><span class="line">[root@sorozy run]# kill -s SIGHUP 1775</span><br><span class="line">[root@sorozy run]# </span><br><span class="line">[root@sorozy run]# ps -ef | grep nginx</span><br><span class="line">root      1775     1  0 11:11 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">root      2146  1775  0 11:22 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx     2147  2146  0 11:22 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     2148  2146  0 11:22 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     2280  1775  0 11:25 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     2281  1775  0 11:25 ?        00:00:00 nginx: worker process</span><br><span class="line">root      2285  1460  0 11:25 pts/0    00:00:00 grep --color=auto nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@sorozy run]#  kill -s SIGQUIT 2146</span><br><span class="line">[root@sorozy run]# ps -ef | grep nginx</span><br><span class="line">root      1775     1  0 11:11 ?        00:00:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx     2280  1775  0 11:25 ?        00:00:00 nginx: worker process</span><br><span class="line">nginx     2281  1775  0 11:25 ?        00:00:00 nginx: worker process</span><br><span class="line">root      2355  1460  0 11:26 pts/0    00:00:00 grep --color=auto nginx</span><br><span class="line"></span><br><span class="line">## (2) 删除不需要的old进程</span><br><span class="line">kill -s SIGQUIT 1775</span><br></pre></td></tr></table></figure>
<h2 id="模块化设计机制"><a href="#模块化设计机制" class="headerlink" title="模块化设计机制"></a>模块化设计机制</h2><ul>
<li>模块结构图</li>
</ul>
<p><img src="WechatIMG611.png" width="80%"></p>
<ul>
<li>模块体系结构</li>
</ul>
<p><img src="WechatIMG612.png" width="80%"></p>
<h2 id="Nginx编译安装配置参数"><a href="#Nginx编译安装配置参数" class="headerlink" title="Nginx编译安装配置参数"></a>Nginx编译安装配置参数</h2><ul>
<li>常用配置参数</li>
</ul>
<p><img src="WechatIMG613.png" width="80%"></p>
<h2 id="定制编译安装Nginx"><a href="#定制编译安装Nginx" class="headerlink" title="定制编译安装Nginx"></a>定制编译安装Nginx</h2><ul>
<li>环境准备</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">centos7</span><br><span class="line"></span><br><span class="line">wget</span><br><span class="line"></span><br><span class="line">yum</span><br></pre></td></tr></table></figure>
<ul>
<li>软件包准备</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@sorozy source]# pwd</span><br><span class="line">/opt/source</span><br><span class="line">[root@sorozy source]# ll</span><br><span class="line">总用量 3512</span><br><span class="line">-rw-r--r--. 1 root root 1032630 8月  14 2019 nginx-1.16.1.tar.gz</span><br><span class="line">-rw-r--r--. 1 root root 2085854 2月  24 2019 pcre-8.43.tar.gz</span><br><span class="line">-rw-r--r--. 1 root root  467960 1月  16 2017 zlib-1.2.11.tar.xz</span><br></pre></td></tr></table></figure>
<ul>
<li>解压</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@sorozy source]# tar xf zlib-1.2.11.tar.xz </span><br><span class="line">[root@sorozy source]# tar xf pcre-8.43.tar.gz </span><br><span class="line">[root@sorozy source]# tar xf nginx-1.16.1.tar.gz </span><br><span class="line">[root@sorozy source]# </span><br><span class="line">[root@sorozy source]# </span><br><span class="line">[root@sorozy source]# ll</span><br><span class="line">总用量 3528</span><br><span class="line">drwxr-xr-x.  8 1001  1001     158 8月  13 2019 nginx-1.16.1</span><br><span class="line">-rw-r--r--.  1 root root  1032630 8月  14 2019 nginx-1.16.1.tar.gz</span><br><span class="line">drwxr-xr-x.  7 1169  1169    8192 2月  24 2019 pcre-8.43</span><br><span class="line">-rw-r--r--.  1 root root  2085854 2月  24 2019 pcre-8.43.tar.gz</span><br><span class="line">drwxr-xr-x. 14  501 games    4096 1月  16 2017 zlib-1.2.11</span><br><span class="line">-rw-r--r--.  1 root root   467960 1月  16 2017 zlib-1.2.11.tar.xz</span><br></pre></td></tr></table></figure>
<ul>
<li>编译前需要安装的相关依赖以及准备工作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++</span><br><span class="line">yum install openssl openssl-devel -y</span><br><span class="line">yum install gd gd-devel -y</span><br><span class="line">useradd nginx</span><br><span class="line"></span><br><span class="line"># 关闭防火墙</span><br><span class="line"># 关闭selinux</span><br></pre></td></tr></table></figure>
<ul>
<li>指定编译参数对nginx进行编译安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 进入nginx的解压目录</span><br><span class="line">cd nginx-1.16.1</span><br><span class="line"></span><br><span class="line">./configure --prefix=/opt/nginx --conf-path=/opt/nginx/conf/nginx.conf --user=nginx --group=nginx --pid-path=/opt/nginx/pid/nginx.pid --error-log-path=/opt/nginx/logs/error.log --with-pcre=/opt/source/pcre-8.43 --with-zlib=/opt/source/zlib-1.2.11 --with-http_ssl_module --with-http_image_filter_module --with-http_stub_status_module --http-log-path=/opt/nginx/logs/access.log</span><br></pre></td></tr></table></figure>
<p><br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<ul>
<li>nginx启动</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/nginx/sbin/nginx</span><br></pre></td></tr></table></figure>
<h1 id="Nginx配置文件结构"><a href="#Nginx配置文件结构" class="headerlink" title="Nginx配置文件结构"></a>Nginx配置文件结构</h1><p><img src="WechatIMG614.png" width="80%"></p>
<h2 id="配置文件核心参数用法"><a href="#配置文件核心参数用法" class="headerlink" title="配置文件核心参数用法"></a>配置文件核心参数用法</h2><h3 id="main段核心参数"><a href="#main段核心参数" class="headerlink" title="main段核心参数"></a>main段核心参数</h3><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>user USERNAME [GROUP]</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定运行Nginx的worker子进程的属主和属组，其中属组可以不指定</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>user nginx nginx;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>pid DIR</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定运行Nginx的master主进程的pid文件存放路径</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>pid /opt/nginx/logs/nginx.pid;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>worker_rlimit_nofile number</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定worker子进程可以打开的最大文件句柄数</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_rlimit_nofile 20480;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>worker_rlimit_core size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定worker子进程异常终止后的core文件，用于记录分析问题</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_rlimit_core 50M;<br>working_directory /opt/nginx/tmp;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>work_processes number \</th>
<th>auto</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定nginx启动的worker子进程数量</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_processes 4;<br>worker_processes auto;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>worker_cpu_affinity cpumask1 cpumask2…</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>将每个worker子进程与我们的cpu物理核心绑定</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_cpu_affinity 0001 0010 0100 1000;<br>worker_cpu_affinity 00000001 00000010 00000100 00001000 00010000 00100000 01000000 10000000; # 8物理核心 8个worker子进程<br>worker_cpu_affinity 01 10 01 10; # 2个物理核心 4个worker子进程</td>
</tr>
<tr>
<td style="text-align:center">备注</td>
<td>将每个worker子进程与特定cpu物理核心绑定，优势在于：避免同一个worker子进程在不同的cpu物理核心上切换，缓存失效，降低性能；其并不能避免真正的进程切换</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>worker_priority number</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定worker子进程的nice值，以调整运行nginx的优先级。通常设置为负值，以优先调用nginx</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_priority -10;</td>
</tr>
<tr>
<td style="text-align:center">备注</td>
<td>Linux默认进程的优先级值是120，值越小越优先；nice设定范围为-20到+19</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>worker_shutdown_timeout time</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>指定worker子进程优雅退出时的超时时间</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_shutdown_timeout 5s;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>timer_resolution time</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>worker子进程内部使用的计时器精度，调整时间间隔越大，系统调用越少，有利于性能提升，反之，系统调用越多，性能下降</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>worker_resolution 100ms;</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th>daemon on \</th>
<th>off</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">解释</td>
<td>设定nginx的运行方式，前台还是后台，前台用户调试，后台用于生产</td>
</tr>
<tr>
<td style="text-align:center">示例</td>
<td>daemon off;</td>
</tr>
</tbody>
</table>
<ul>
<li>lock_file</li>
</ul>
<table>
<thead>
<tr>
<th>语法</th>
<th>lock_file file</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认配置</td>
<td>lock_file logs/nginx.lock</td>
</tr>
<tr>
<td>推荐配置</td>
<td>lock_file logs/nginx.lock</td>
</tr>
<tr>
<td>解释</td>
<td>负载均衡锁信息会写入该文件</td>
</tr>
</tbody>
</table>
<h3 id="events段核心参数"><a href="#events段核心参数" class="headerlink" title="events段核心参数"></a>events段核心参数</h3><table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">use</td>
<td>nginx使用何种事件驱动模型</td>
</tr>
<tr>
<td style="text-align:left">worker_connections</td>
<td>worker子进程能够处理的最大并发连接数</td>
</tr>
<tr>
<td style="text-align:left">accept_mutex</td>
<td>是否打开负载均衡互斥锁</td>
</tr>
<tr>
<td style="text-align:left">accept_mutex_delay</td>
<td>新连接分配给worker子进程的超时时间</td>
</tr>
<tr>
<td style="text-align:left">lock_file</td>
<td>负载均衡互斥锁文件存放路径</td>
</tr>
<tr>
<td style="text-align:left">multi_accept</td>
<td>worker子进程可以接收的新连接个数</td>
</tr>
</tbody>
</table>
<ul>
<li>use</li>
</ul>
<table>
<thead>
<tr>
<th>语法</th>
<th>use method</th>
</tr>
</thead>
<tbody>
<tr>
<td>method可选值</td>
<td>select、poll、kqueue、epoll、/dev/poll、eventport</td>
</tr>
<tr>
<td>默认配置</td>
<td>无</td>
</tr>
<tr>
<td>推荐配置</td>
<td>不指定，让nginx自己选择</td>
</tr>
</tbody>
</table>
<ul>
<li>worker_connections</li>
</ul>
<table>
<thead>
<tr>
<th>语法</th>
<th>worker_connections number</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认配置</td>
<td>worker_connections 1024</td>
</tr>
<tr>
<td>推荐配置</td>
<td>worker_connections 65535/worker_processes \</td>
<td>65535</td>
</tr>
</tbody>
</table>
<ul>
<li>accept_mutex</li>
</ul>
<table>
<thead>
<tr>
<th>语法</th>
<th>accept_mutex on \</th>
<th>off</th>
</tr>
</thead>
<tbody>
<tr>
<td>可选值</td>
<td>on、off</td>
</tr>
<tr>
<td>默认配置</td>
<td>accept_muttex off</td>
</tr>
<tr>
<td>推荐配置</td>
<td>accept_mutex on</td>
</tr>
<tr>
<td>解释</td>
<td>当请求到达master process，off（默认）：给所有子进程发送这个请求。on：只给其中的一个子进程发送请求</td>
</tr>
</tbody>
</table>
<ul>
<li>accept_mutex_delay</li>
</ul>
<table>
<thead>
<tr>
<th>语法</th>
<th>accept_mutex_delay time</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认配置</td>
<td>accept_mutex_delay 500ms</td>
</tr>
<tr>
<td>推荐配置</td>
<td>accept_mutex_delay 200ms</td>
</tr>
<tr>
<td>解释</td>
<td>当请求到达master process，会给其中一个子进程发送请求，如果该子进程在设置的时间内未响应（响应超时），则master process会再给其它子进程发送请求</td>
</tr>
<tr>
<td>备注</td>
<td>只有当<code>accept_mutex</code>设置为<code>on</code>的时候才有意义</td>
</tr>
</tbody>
</table>
<ul>
<li>multi_accept</li>
</ul>
<table>
<thead>
<tr>
<th>语法</th>
<th>multi_accept on \</th>
<th>off</th>
</tr>
</thead>
<tbody>
<tr>
<td>可选值</td>
<td>on、of</td>
</tr>
<tr>
<td>默认配置</td>
<td>multi_accept off</td>
</tr>
<tr>
<td>推荐配置</td>
<td>multi_accept on</td>
</tr>
<tr>
<td>解释</td>
<td>一个子进程一次可以接受多个请求</td>
</tr>
</tbody>
</table>
<h3 id="server-name"><a href="#server-name" class="headerlink" title="server_name"></a>server_name</h3><p><strong>语法</strong>：server_name name1,name2,…;</p>
<ul>
<li>四种写法</li>
</ul>
<table>
<thead>
<tr>
<th>server_name</th>
<th><a href="http://www.badiu.com" target="_blank" rel="noopener">www.badiu.com</a></th>
</tr>
</thead>
<tbody>
<tr>
<td>server_name</td>
<td>*.baidu.com</td>
</tr>
<tr>
<td>server_name</td>
<td><a href="http://www.baidu." target="_blank" rel="noopener">www.baidu.</a>*</td>
</tr>
<tr>
<td>server_name</td>
<td>~^www\.baidu\.*$</td>
</tr>
</tbody>
</table>
<p><code>~</code>表示正则表达式匹配</p>
<ul>
<li>优先级</li>
</ul>
<blockquote>
<p>精确匹配 &gt; 左侧通配符匹配 &gt; 右侧通配符匹配 &gt; 正则表达式匹配</p>
</blockquote>
<h3 id="root-amp-alias"><a href="#root-amp-alias" class="headerlink" title="root &amp; alias"></a>root &amp; alias</h3><ul>
<li><p>相同点</p>
<blockquote>
<p>URI到磁盘路径的映射</p>
</blockquote>
</li>
<li><p>区别</p>
<blockquote>
<p>root会将定义路径与URI叠加<br></p>
<p>alias则只去定义路径<br></p>
<p>使用alias末尾一定要加/<br></p>
<p>alias只能位于location块中<br></p>
</blockquote>
</li>
</ul>
<h3 id="location"><a href="#location" class="headerlink" title="location"></a>location</h3><ul>
<li>匹配规则</li>
</ul>
<p><img src="WechatIMG640.png" width="80%"></p>
<ul>
<li>优先级</li>
</ul>
<blockquote>
<p><code>=</code> &gt; <code>^~</code> &gt; <code>~</code> &gt; <code>~*</code> &gt; <code>不带任何字符</code></p>
</blockquote>
<ul>
<li>URL末尾带<code>/</code>和不带<code>/</code>的区别</li>
</ul>
<h1 id="module"><a href="#module" class="headerlink" title="module"></a>module</h1><h2 id="stub-status"><a href="#stub-status" class="headerlink" title="stub_status"></a>stub_status</h2><blockquote>
<p>指令：stub_status；<br></p>
<p>低于1.7.5版本：stub_status on；<br></p>
<p>上下文：server location；</p>
</blockquote>
<ul>
<li>配置示例</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /uri &#123;</span><br><span class="line">  stub_status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>状态项</li>
</ul>
<p><img src="WechatIMG643.png" width="80%"></p>
<ul>
<li>内嵌变量</li>
</ul>
<p><img src="WechatIMG644.png" width="80%"></p>
<h2 id="limit-conn"><a href="#limit-conn" class="headerlink" title="limit_conn"></a>limit_conn</h2><h3 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h3><blockquote>
<p>用于限制客户端并发连接数<br></p>
<p>默认编译进Nginx，通过<code>--without-http_limit_conn_module</code></p>
<p>使用共享内存，对所有worker子进程生效</p>
</blockquote>
<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><p><code>limit_conn_zone</code></p>
<p><code>limit_conn_status</code></p>
<p><code>limit_conn_log_level</code></p>
<p><code>limit_conn</code></p>
<h3 id="limit-conn-zone"><a href="#limit-conn-zone" class="headerlink" title="limit_conn_zone"></a>limit_conn_zone</h3><table>
<thead>
<tr>
<th>语法</th>
<th>limit_conn_zone key zone=name:size</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认值</td>
<td>无</td>
</tr>
<tr>
<td>上下文</td>
<td>http</td>
</tr>
<tr>
<td>示例</td>
<td><code>limit_conn_zone $binary_remote_addr name=addr:10m</code></td>
</tr>
</tbody>
</table>
<h3 id="limit-conn-status"><a href="#limit-conn-status" class="headerlink" title="limit_conn_status"></a>limit_conn_status</h3><table>
<thead>
<tr>
<th>语法</th>
<th>limit_conn_status code;</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认值</td>
<td><code>limit_conn_status 503</code></td>
</tr>
<tr>
<td>上下文</td>
<td>http、server、location</td>
</tr>
</tbody>
</table>
<h3 id="limit-conn-log-level"><a href="#limit-conn-log-level" class="headerlink" title="limit_conn_log_level"></a>limit_conn_log_level</h3><table>
<thead>
<tr>
<th>语法</th>
<th><code>limit_conn_log_level</code>  <code>info</code>/<code>notice</code>/<code>warn</code>/<code>error</code>;</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认值</td>
<td><code>limit_conn_status</code> <code>503</code></td>
</tr>
<tr>
<td>上下文</td>
<td>http、server、location</td>
</tr>
</tbody>
</table>
<h3 id="limit-conn-1"><a href="#limit-conn-1" class="headerlink" title="limit_conn"></a>limit_conn</h3><table>
<thead>
<tr>
<th>语法</th>
<th>limit_conn zone number;</th>
</tr>
</thead>
<tbody>
<tr>
<td>默认值</td>
<td>无</td>
</tr>
<tr>
<td>上下文</td>
<td>http、server、location</td>
</tr>
</tbody>
</table>
<h2 id="limit-req"><a href="#limit-req" class="headerlink" title="limit_req"></a>limit_req</h2><blockquote>
<p>用于限制客户端处理请求的平均速率</p>
<p>默认编译进nginx，通过<code>--without-http_limit_req_module</code>禁用</p>
<p>使用共享内存，对所有woker子进程生效</p>
<p>限流算法：leaky_bucket</p>
</blockquote>
<ul>
<li>leaky_bucket算法</li>
</ul>
<p><img src="WechatIMG647.png" width="80%"></p>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        <li>
            <a target="_blank" href="https://twitter.com/iconie_alloy">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-twitter"></i>
                            </span>
            </a>
        </li>
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/ai-er-lan-xue-da">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="http://weibo.com/3286578617">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="https://www.facebook.com/xiaotao.nie.5">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-facebook"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://github.com/AirCloud">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/小涛-聂-80964aba">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://www.10000h.top">10000H</a></span>
        <span>/</span>
        
        <span><a href="https://niexiaotao.com">Xiaotao&#39;s Page</a></span>
        <span>/</span>
        
        <span><a href="#">It helps SEO</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        if( '' || '')
        var disqus_config = function () {
            this.page.url = '';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://airclouds-blog.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>



</html>
