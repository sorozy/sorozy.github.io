<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        《理论+实战 构建完整JVM知识体系》study notes - sorozy | sorozy&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 起风了，唯有努力生存 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>sorozy</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#备注"><span class="toc-text">备注</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JVM概述"><span class="toc-text">JVM概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#jvm主要功能"><span class="toc-text">jvm主要功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jvm规范作用"><span class="toc-text">jvm规范作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jvm规范定义的主要内容"><span class="toc-text">jvm规范定义的主要内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#class文件格式概述"><span class="toc-text">class文件格式概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#类加载"><span class="toc-text">类加载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#概述"><span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#类加载要完成的功能"><span class="toc-text">类加载要完成的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#加载类的方式"><span class="toc-text">加载类的方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类加载器"><span class="toc-text">类加载器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类加载器说明"><span class="toc-text">类加载器说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#双亲委派模型"><span class="toc-text">双亲委派模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#破坏双亲委派模型"><span class="toc-text">破坏双亲委派模型</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 起风了，唯有努力生存 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        《理论+实战 构建完整JVM知识体系》study notes
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-09-03 10:47:04</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#jvm" title="jvm">jvm</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h1><blockquote>
<p>Java9模块系统开发需要抽空了解一下</p>
</blockquote>
<h1 id="JVM概述"><a href="#JVM概述" class="headerlink" title="JVM概述"></a>JVM概述</h1><ul>
<li>JVM：Java Virtual Machine（java虚拟机）</li>
<li>虚拟机：通过软件模拟的具有完整硬件系统功能的、运行在一个完全隔离环境中的计算机系统</li>
<li>jvm是通过软件来模拟java的字节码指令集，是java程序的运行环境</li>
</ul>
<p><br></p>
<p><img width="700px" src="WechatIMG388.png"></p>
<h2 id="jvm主要功能"><a href="#jvm主要功能" class="headerlink" title="jvm主要功能"></a>jvm主要功能</h2><ol>
<li>通过ClassLoader寻找和装载class文件</li>
<li>解释字节码成为指令并执行，提供class文件的运行环境</li>
<li>进行运行期间的内存分配和垃圾回收</li>
<li>提供与硬件交互的平台</li>
</ol>
<p><br></p>
<ul>
<li>虚拟机是java平台无关的保障</li>
</ul>
<p><img width="700px" src="WechatIMG393.png"></p>
<h2 id="jvm规范作用"><a href="#jvm规范作用" class="headerlink" title="jvm规范作用"></a>jvm规范作用</h2><ul>
<li>java虚拟机规范为不同的硬件平台提供了一种编译java技术代码的规范</li>
<li>该规范使用java软件独立于平台，因为编译是针对作为虚拟机的<code>一般机器</code>而做</li>
<li>这个<code>一般机器</code>可用软件模拟并运行于各种现存的计算机系统，也可用硬件来实现</li>
</ul>
<h2 id="jvm规范定义的主要内容"><a href="#jvm规范定义的主要内容" class="headerlink" title="jvm规范定义的主要内容"></a>jvm规范定义的主要内容</h2><ul>
<li>字节码指令集（相当于中央处理器cpu）</li>
<li>class文件的格式</li>
<li>数据类型和值</li>
<li>运行时数据区</li>
<li>栈帧</li>
<li>特殊方法</li>
<li>类库</li>
<li>异常</li>
<li>虚拟机的启动、加载、链接和初始化</li>
</ul>
<h1 id="class文件格式概述"><a href="#class文件格式概述" class="headerlink" title="class文件格式概述"></a>class文件格式概述</h1><p>class文件是jvm的输入，java虚拟机规范中定义了，class文件的结构，class问价是jvm实现平台无关、技术无关的基础</p>
<p>1:class文件是一组以8字节为单位的字节流，各个数据项目按顺序紧凑排列</p>
<p>2:对于占用空间大于8字节的的数据项，按照高位在前的方式分割成多个8字节进行存储</p>
<p>3:class文件格式里面只有两种数据类型：无符号数、表</p>
<p>（1）无符号数：基础数据类型，以u1、u2、u4、u8来代表几个字节的无符号数</p>
<p>（2）表：由多个无符号数和其它表构成的复合数据类型，通常以<code>_info</code>结尾</p>
<h1 id="类加载"><a href="#类加载" class="headerlink" title="类加载"></a>类加载</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><img width="500px" src="WechatIMG404.png"></p>
<ul>
<li>加载：查找并加载类文件的二进制数据</li>
<li>连接：将已经读入内存的类的二进制数据合并到jvm运行时环境中去，包含如下几个步骤</li>
</ul>
<blockquote>
<ol>
<li>验证 ：确保被加载类的正确性</li>
<li>准备：为类的静态变量分配内存，并初始化它们</li>
<li>解析：把常量池中的符号引用转换成直接引用</li>
</ol>
</blockquote>
<ul>
<li>初始化：为类的静态变量赋初始值</li>
</ul>
<h3 id="类加载要完成的功能"><a href="#类加载要完成的功能" class="headerlink" title="类加载要完成的功能"></a>类加载要完成的功能</h3><ol>
<li>通过类的全限定名来获取该类的二进制字节流</li>
<li>把二进制字节流转化为方法区的运行时数据结构</li>
<li>在堆上创建一个java.lang.Class对象，用来封装类在方法区内的数据结构，并向外提供了访问方法区内数据结构的接口</li>
</ol>
<h3 id="加载类的方式"><a href="#加载类的方式" class="headerlink" title="加载类的方式"></a>加载类的方式</h3><ul>
<li>最常见的方式：本地文件系统中加载、从jar等归档文件中加载</li>
<li>动态的方式：将java源文件动态编译成class</li>
<li>其它方式：网络下载、从专有数据库中加载等等</li>
</ul>
<h2 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h2><p><img width="500px" src="WechatIMG409.png"></p>
<ul>
<li>为什么要废除jdk1.8的扩展类加载器</li>
</ul>
<blockquote>
<ol>
<li>jdk1.8的扩展类加载器主要加载<code>jre/lib/ext</code> 下面的jar包，当我们想扩展功能的时候就把jar包放在下面。其实并不安全</li>
<li>jdk9想要扩展功能的时候，因为jdk9有了模块化开发，这种扩展机制就被模块化的天然扩展能力取代了</li>
</ol>
</blockquote>
<ul>
<li>类加载器的关系</li>
</ul>
<p><img width="500px" src="WechatIMG411.png"></p>
<h2 id="类加载器说明"><a href="#类加载器说明" class="headerlink" title="类加载器说明"></a>类加载器说明</h2><p><img width="500px" src="WechatIMG413.png"><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 各种类加载器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoaderStudy</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">		String str = <span class="string">"Hello ClassLoader"</span>;</span><br><span class="line">		System.out.println(<span class="string">"str ClassLoader == "</span> + str.getClass().getClassLoader());</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"\n"</span>);</span><br><span class="line">		</span><br><span class="line">		Class driver = Class.forName(<span class="string">"java.sql.Driver"</span>);</span><br><span class="line">		System.out.println(<span class="string">"driver ClassLoader == "</span> + driver.getClassLoader());</span><br><span class="line">		System.out.println(<span class="string">"driver parent ClassLoader == "</span> + driver.getClassLoader().getParent());</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"\n"</span>);</span><br><span class="line">		</span><br><span class="line">		ClassLoaderStudy clt = <span class="keyword">new</span> ClassLoaderStudy();</span><br><span class="line">		System.out.println(<span class="string">"clt ClassLoader == "</span> + clt.getClass().getClassLoader());</span><br><span class="line">		System.out.println(<span class="string">"clt parent  ClassLoader == "</span> + clt.getClass().getClassLoader().getParent());</span><br><span class="line">		System.out.println(<span class="string">"clt parent parent ClassLoader == "</span> + clt.getClass().getClassLoader().getParent().getParent());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运行输出结果</span></span><br><span class="line">str ClassLoader == <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">driver ClassLoader == jdk.internal.loader.ClassLoaders$PlatformClassLoader@<span class="number">27</span>c170f0</span><br><span class="line">driver parent ClassLoader == <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">clt ClassLoader == jdk.internal.loader.ClassLoaders$AppClassLoader@<span class="number">55054057</span></span><br><span class="line">clt parent  ClassLoader == jdk.internal.loader.ClassLoaders$PlatformClassLoader@<span class="number">27</span>c170f0</span><br><span class="line">clt parent parent ClassLoader == <span class="keyword">null</span></span><br></pre></td></tr></table></figure>
<p><img width="500px" src="WechatIMG414.png"><br></p>
<p><img width="500px" src="WechatIMG415.png"></p>
<h2 id="双亲委派模型"><a href="#双亲委派模型" class="headerlink" title="双亲委派模型"></a>双亲委派模型</h2><p><img width="500px" src="WechatIMG416.png"><br></p>
<p><img width="500px" src="WechatIMG417.png"><br><img width="500px" src="WechatIMG30.png"><br></p>
<p><img width="500px" src="WechatIMG31.png"><br></p>
<h3 id="破坏双亲委派模型"><a href="#破坏双亲委派模型" class="headerlink" title="破坏双亲委派模型"></a>破坏双亲委派模型</h3><p><img width="500px" src="WechatIMG32.png"><br></p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/sorozy">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
