<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        SpringMVC study notes - sorozy | sorozy&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 起风了，唯有努力生存 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>sorozy</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#学习备注"><span class="toc-text">学习备注</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringMVC-概述"><span class="toc-text">SpringMVC 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC-核心内容"><span class="toc-text">SpringMVC 核心内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC概述"><span class="toc-text">SpringMVC概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#是什么"><span class="toc-text">是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#能干什么"><span class="toc-text">能干什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#怎么玩"><span class="toc-text">怎么玩</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringMVC-HelloWorld"><span class="toc-text">SpringMVC HelloWorld</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#（1）创建web项目工程，导包"><span class="toc-text">（1）创建web项目工程，导包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#（2）写配置"><span class="toc-text">（2）写配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#（3）测试（编写业务类并测试）"><span class="toc-text">（3）测试（编写业务类并测试）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HelloWorld-运行流程细节"><span class="toc-text">HelloWorld 运行流程细节</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RequestMapping"><span class="toc-text">@RequestMapping</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PathVariable"><span class="toc-text">@PathVariable</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Rest"><span class="toc-text">Rest</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#从页面发起PUT、DELETE形式的请求-Spring提供了对Rest风格的支持"><span class="toc-text">从页面发起PUT、DELETE形式的请求? Spring提供了对Rest风格的支持</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#请求参数-数据绑定"><span class="toc-text">请求参数/数据绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#数据绑定"><span class="toc-text">数据绑定</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#解决中文乱码"><span class="toc-text">解决中文乱码</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 起风了，唯有努力生存 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        SpringMVC study notes
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2021-01-14 13:59:58</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#SpringMVC" title="SpringMVC">SpringMVC</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote>
<p>Controller 接收请求参数，这块，复杂类型的参数一定都走一遍。可以参考java工程师2019版本的代码</p>
</blockquote>
<h1 id="SpringMVC-概述"><a href="#SpringMVC-概述" class="headerlink" title="SpringMVC 概述"></a>SpringMVC 概述</h1><h2 id="SpringMVC-核心内容"><a href="#SpringMVC-核心内容" class="headerlink" title="SpringMVC 核心内容"></a>SpringMVC 核心内容</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>SpringMVC 概述</span><br><span class="line"><span class="number">2.</span>SpringMVC 的 HelloWorld</span><br><span class="line"><span class="number">3.</span>使用 @RequestMapping 映射请求</span><br><span class="line"><span class="number">4.</span>映射请求参数 &amp; 请求头</span><br><span class="line"><span class="number">5.</span>处理模型数据</span><br><span class="line"><span class="number">6.</span>视图和视图解析器</span><br><span class="line"><span class="number">7.</span>RESTful CRUD</span><br><span class="line"><span class="number">8.</span>SpringMVC 表单标签 &amp;处理静态资源	</span><br><span class="line"><span class="number">9.</span>数据转换 &amp; 数据格式化 &amp; 数据校验</span><br><span class="line"><span class="number">10.</span>处理 JSON：使用 HttpMessageConverter</span><br><span class="line"><span class="number">11.</span>国际化 </span><br><span class="line"><span class="number">12.</span>文件的上传</span><br><span class="line"><span class="number">13.</span>使用拦截器 </span><br><span class="line"><span class="number">14.</span>异常处理</span><br><span class="line"><span class="number">15.</span>SpringMVC 运行流程</span><br><span class="line"><span class="number">16.</span>在 Spring 的环境下使用 SpringMVC</span><br><span class="line"><span class="number">17.</span>SpringMVC 对比 Struts2</span><br></pre></td></tr></table></figure>
<h2 id="SpringMVC概述"><a href="#SpringMVC概述" class="headerlink" title="SpringMVC概述"></a>SpringMVC概述</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）Spring 为展现层提供的基于 MVC 设计理念的优秀的 Web 框架，是目前最主流的 MVC 框架之一。</span><br><span class="line">（<span class="number">2</span>）Spring3<span class="number">.0</span> 后全面超越 Struts2，成为最优秀的 MVC 框架。</span><br><span class="line">（<span class="number">3</span>）Spring MVC 通过一套 MVC 注解，让 POJO 成为处理请求的控制器，而无须实现任何接口。</span><br><span class="line">（<span class="number">4</span>）支持 REST 风格的 URL 请求。</span><br><span class="line">（<span class="number">5</span>）采用了松散耦合可插拔组件结构，比其他 MVC 框架更具扩展性和灵活性</span><br></pre></td></tr></table></figure>
<h2 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">一种轻量级的、基于MVC的Web层应用框架。偏前端而不是基于业务逻辑层。</span><br><span class="line">是Spring框架的一个后续产品。</span><br></pre></td></tr></table></figure>
<h2 id="能干什么"><a href="#能干什么" class="headerlink" title="能干什么"></a>能干什么</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">天生与<span class="selector-tag">Spring</span>框架集成，如：(IOC,AOP)</span><br><span class="line">支持<span class="selector-tag">Restful</span>风格</span><br><span class="line">进行更简洁的<span class="selector-tag">Web</span>层开发</span><br><span class="line">支持灵活的<span class="selector-tag">URL</span>到页面控制器的映射</span><br><span class="line">非常容易与其他视图技术集成，如<span class="selector-pseudo">:Velocity</span>、<span class="selector-tag">FreeMarker</span>等等。</span><br><span class="line">因为模型数据不存放在特定的<span class="selector-tag">API</span>里，而是放在一个<span class="selector-tag">Model</span>里(Map数据结构实现，因此很容易被其他框架使用)</span><br><span class="line">非常灵活的数据验证、格式化和数据绑定机制、能使用任何对象进行数据绑定，不必实现特定框架的<span class="selector-tag">API</span></span><br><span class="line">更加简单、强大的异常处理</span><br><span class="line">对静态资源的支持</span><br><span class="line">支持灵活的本地化、主题等解析</span><br></pre></td></tr></table></figure>
<h2 id="怎么玩"><a href="#怎么玩" class="headerlink" title="怎么玩"></a>怎么玩</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）将Web层进行了职责解耦，也就和<span class="keyword">struts2一样，基于请求-响应模型</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">（2）常用主要组件</span></span><br><span class="line"><span class="keyword"> </span> DispatcherServlet：前端控制器</span><br><span class="line">  Controller：处理器/页面控制器，做的是MVC中的C的事情，但控制逻辑转移到前端控制器了，用于对请求进行处理</span><br><span class="line">  HandlerMapping ：请求映射到处理器，找谁来处理，如果映射成功返回一个HandlerExecutiongChain对象（包含一个Handler处理器(页面控制器)对象、多个HandlerInterceptor拦截器对象） </span><br><span class="line">  ViewResolver : 视图解析器，找谁来处理返回的页面。把逻辑视图解析为具体的View,进行这种策略模式，很容易更换其他视图技术；</span><br><span class="line">      如InternalResourceViewResolver将逻辑视图名映射为JSP视图</span><br><span class="line">  LocalResolver：本地化、国际化</span><br><span class="line">  <span class="keyword">MultipartResolver：文件上传解析器</span></span><br><span class="line"><span class="keyword"> </span> HandlerExceptionResolver：异常处理器</span><br></pre></td></tr></table></figure>
<h1 id="SpringMVC-HelloWorld"><a href="#SpringMVC-HelloWorld" class="headerlink" title="SpringMVC HelloWorld"></a>SpringMVC HelloWorld</h1><h2 id="（1）创建web项目工程，导包"><a href="#（1）创建web项目工程，导包" class="headerlink" title="（1）创建web项目工程，导包"></a>（1）创建web项目工程，导包</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">spring-aop-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">spring-beans-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">spring-context-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">spring-core-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">spring-expression-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">commons-logging-1</span><span class="selector-class">.1</span><span class="selector-class">.3</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">spring-web-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br><span class="line"><span class="selector-tag">spring-webmvc-4</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.RELEASE</span><span class="selector-class">.jar</span></span><br></pre></td></tr></table></figure>
<h2 id="（2）写配置"><a href="#（2）写配置" class="headerlink" title="（2）写配置"></a>（2）写配置</h2><ul>
<li>web.xml（配置DispatcherServlet）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>1.SpringMVC_helloworld<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- SpringMVC思想是有一个前端控制器能拦截所有请求，并智能派发;</span></span><br><span class="line"><span class="comment">  	这个前端控制器是一个servlet；应该在web.xml中配置这个servlet来拦截所有请求</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- The front controller of this Spring Web application, </span></span><br><span class="line"><span class="comment">   responsible for handling all application requests --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">      如果不指定配置文件位置？/WEB-INF/springDispatcherServlet-servlet.xml</span></span><br><span class="line"><span class="comment">      如果不指定也会默认去找一个文件；/WEB-INF/springDispatcherServlet-servlet.xml</span></span><br><span class="line"><span class="comment">      就在web应用的/WEB-INF、下创建一个名叫   前端控制器名-servlet.xml</span></span><br><span class="line"><span class="comment">			--&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- contextConfigLocation:指定SpringMVC配置文件位置 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- servlet启动加载，servlet原本是第一次访问创建对象；</span></span><br><span class="line"><span class="comment">		load-on-startup:服务器启动的时候创建对象；值越小优先级越高，越先创建对象；</span></span><br><span class="line"><span class="comment">		 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>0<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Map all requests to the DispatcherServlet for handling --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        /：拦截所有请求，不拦截jsp页面，*.jsp请求</span></span><br><span class="line"><span class="comment">        /*：拦截所有请求，拦截jsp页面，*.jsp请求            </span></span><br><span class="line"><span class="comment">        处理*.jsp是tomcat做的事；所有项目的小web.xml都是继承于大web.xml</span></span><br><span class="line"><span class="comment">        DefaultServlet是Tomcat中处理静态资源的？</span></span><br><span class="line"><span class="comment">            除过jsp，和servlet外剩下的都是静态资源；</span></span><br><span class="line"><span class="comment">            index.html：静态资源，tomcat就会在服务器下找到这个资源并返回;</span></span><br><span class="line"><span class="comment">            我们前端控制器的/禁用了tomcat服务器中的DefaultServlet          </span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        1）服务器的大web.xml中有一个DefaultServlet是url-pattern=/</span></span><br><span class="line"><span class="comment">        2）我们的配置中前端控制器 url-pattern=/</span></span><br><span class="line"><span class="comment">                静态资源会来到DispatcherServlet（前端控制器）看那个方法的RequestMapping是这个index.html</span></span><br><span class="line"><span class="comment">        3）为什么jsp又能访问；因为我们没有覆盖服务器中的JspServlet的配置</span></span><br><span class="line"><span class="comment">        4） /*  直接就是拦截所有请求；我们写/；也是为了迎合后来Rest风格的URL地址</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>springmvc.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 扫描所有组件 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.atguigu"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 配置一个视图解析器 ；能帮我们拼接页面地址--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="（3）测试（编写业务类并测试）"><a href="#（3）测试（编写业务类并测试）" class="headerlink" title="（3）测试（编写业务类并测试）"></a>（3）测试（编写业务类并测试）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1、告诉SpringMVC这是一个处理器，可以处理请求</span></span><br><span class="line"><span class="comment"> * 		<span class="doctag">@Controller</span>：标识哪个组件是控制器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFirstController</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 	 <span class="doctag">@RequestMapping</span>:告诉SpringMVC这个方法处理什么请求；</span></span><br><span class="line"><span class="comment">	 *   /代表从当前项目下开始；处理当前项目下的hello请求</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">myfirstRequest</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"请求收到了....正在处理中"</span>);</span><br><span class="line">		<span class="comment">//视图解析器自动拼串；</span></span><br><span class="line"><span class="comment">//		&lt;property name="prefix" value="/WEB-INF/pages/"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">//		&lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt;</span></span><br><span class="line">		<span class="comment">//   (前缀)/WEB-INF/pages/+返回值(success)+后缀（.jsp）</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="HelloWorld-运行流程细节"><a href="#HelloWorld-运行流程细节" class="headerlink" title="HelloWorld 运行流程细节"></a>HelloWorld 运行流程细节</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）客户端点击链接会发送 `<span class="string">http:</span><span class="comment">//localhost:8080/hello` 请求</span></span><br><span class="line">（<span class="number">2</span>）来到tomcat服务器；</span><br><span class="line">（<span class="number">3</span>）SpringMVC的前端控制器收到所有请求；</span><br><span class="line">（<span class="number">4</span>）来看请求地址和<span class="meta">@RequestMapping</span>标注的哪个匹配，来找到到底使用那个类的哪个方法来处理</span><br><span class="line">（<span class="number">5</span>）前端控制器找到了目标处理器类和目标方法，直接利用返回执行目标方法；</span><br><span class="line">（<span class="number">6</span>）方法执行完成以后会有一个返回值；SpringMVC认为这个返回值就是要去的页面地址</span><br><span class="line">（<span class="number">7</span>）拿到方法返回值以后；用视图解析器进行拼串得到完整的页面地址；</span><br><span class="line">（<span class="number">8</span>）拿到页面地址，前端控制器帮我们转发到页面；</span><br></pre></td></tr></table></figure>
<ul>
<li>SpringMVC处理示意图</li>
</ul>
<p><img src="WechatIMG361.png" width="800px"></p>
<h1 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  @RequestMapping("/hello01") 就是告诉SpringMVC；这个方法用来处理什么请求；</span></span><br><span class="line"><span class="comment"> 		这个/是可以省略，即使省略了，也是默认从当前项目下开始；习惯加上比较好（该注解也可以使用在类上）</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/hello01"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">nihao</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">myfirstRequest</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"请求收到了....正在处理中"</span>);</span><br><span class="line">		<span class="comment">//视图解析器自动拼串；</span></span><br><span class="line"><span class="comment">//		&lt;property name="prefix" value="/WEB-INF/pages/"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">//		&lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt;</span></span><br><span class="line">		<span class="comment">//   (前缀)/WEB-INF/pages/+返回值(success)+后缀（.jsp）</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 为当前类所有的方法的请求地址指定一个基准路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/haha"</span>)</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestMappingTestController</span> </span>&#123;	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * RequestMapping的其他属性</span></span><br><span class="line"><span class="comment">	 * method：限定请求方式、</span></span><br><span class="line"><span class="comment">	 * 		HTTP协议中的所有请求方式：</span></span><br><span class="line"><span class="comment">	 * 			【GET】, HEAD, 【POST】, PUT, PATCH, DELETE, OPTIONS, TRACE</span></span><br><span class="line"><span class="comment">	 * 		GET、POST</span></span><br><span class="line"><span class="comment">	 * 		method=RequestMethod.POST：只接受这种类型的请求，默认是什么都可以；</span></span><br><span class="line"><span class="comment">	 * 			不按规定的请求方式访问会报错：4xx:都是客户端错误</span></span><br><span class="line"><span class="comment">	 * 				405 - Request method 'GET' not supported</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * params：规定请求参数</span></span><br><span class="line"><span class="comment">	 * params 和 headers支持简单的表达式：</span></span><br><span class="line"><span class="comment">	 * 			eg：params=&#123;"username"&#125;:</span></span><br><span class="line"><span class="comment">	 * 				发送请求的时候必须带上一个名为username的参数；没带都会404</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * 			eg:params=&#123;"!username"&#125;</span></span><br><span class="line"><span class="comment">	 * 				发送请求的时候必须不携带上一个名为username的参数；带了都会404</span></span><br><span class="line"><span class="comment">	 </span></span><br><span class="line"><span class="comment">	 * 		param1 != value1: 表示请求包含名为 param1 的请求参数，但其值不能为 value1</span></span><br><span class="line"><span class="comment">	 * 			eg：params=&#123;"username!=123"&#125;</span></span><br><span class="line"><span class="comment">	 * 				发送请求的时候;携带的username值必须不是123(不带username或者username不是123)</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * 		&#123;“param1=value1”, “param2”&#125;: 请求必须包含名为 param1 和param2 的两个请求参数，且 param1 参数的值必须为 value1</span></span><br><span class="line"><span class="comment">	 * 			eg:params=&#123;"username!=123","pwd","!age"&#125;</span></span><br><span class="line"><span class="comment">	 * 				请求参数必须满足以上规则；</span></span><br><span class="line"><span class="comment">	 * 				请求的username不能是123，必须有pwd的值，不能有age</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * headers：规定请求头；也和params一样能写简单的表达式</span></span><br><span class="line"><span class="comment">	 * 	</span></span><br><span class="line"><span class="comment">	 * consumes：只接受内容类型是哪种的请求，规定请求头中的Content-Type</span></span><br><span class="line"><span class="comment">	 * produces：告诉浏览器返回的内容类型是什么，给响应头中加上Content-Type:text/html;charset=utf-8</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/handle02"</span>,method=RequestMethod.POST)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">handle02</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"handle02..."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/handle03"</span>,params=&#123;<span class="string">"username!=123"</span>,<span class="string">"pwd"</span>,<span class="string">"!age"</span>&#125;)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">handle03</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"handle03...."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * User-Agent：浏览器信息；</span></span><br><span class="line"><span class="comment">	 * 让火狐能访问，让谷歌不能访问</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * 谷歌：</span></span><br><span class="line"><span class="comment">	 * User-Agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</span></span><br><span class="line"><span class="comment">	 * 火狐;</span></span><br><span class="line"><span class="comment">	 * User-Agent	Mozilla/5.0 (Windows NT 6.3; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/handle04"</span>,headers=&#123;<span class="string">"User-Agent=Mozilla/5.0 (Windows NT 6.3; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0"</span>&#125;)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">handle04</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"handle04...."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 	<span class="doctag">@RequestMapping</span>模糊匹配功能</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * URL地址可以写模糊的通配符：</span></span><br><span class="line"><span class="comment"> * 	？：能替代任意一个字符</span></span><br><span class="line"><span class="comment"> * 	*：能替代任意多个字符，和一层路径</span></span><br><span class="line"><span class="comment"> * 	**：能替代多层路径</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestMappingTest</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * ?匹配一个字符,0个多个都不行;</span></span><br><span class="line"><span class="comment">	 * 		模糊和精确多个匹配情况下，精确优先</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/antTest0?"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">antTest02</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"antTest02..."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *   *匹配任意多个字符</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/antTest0*"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">antTest03</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"antTest03..."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *  *：匹配一层路径</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/a/*/antTest01"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">antTest04</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"antTest04..."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/a/**/antTest01"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">antTest05</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"antTest05..."</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="PathVariable"><a href="#PathVariable" class="headerlink" title="@PathVariable"></a>@PathVariable</h2><ul>
<li>匹配路径上占位符的值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路径上可以有占位符：  占位符 语法就是可以在任意路径的地方写一个&#123;变量名&#125;</span></span><br><span class="line"><span class="comment">//   /user/admin    /user/leifengyang</span></span><br><span class="line"><span class="comment">// 路径上的占位符只能占一层路径</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">pathVariableTest</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span>String id)</span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"路径上的占位符的值"</span>+id);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Rest"><a href="#Rest" class="headerlink" title="Rest"></a>Rest</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 处理查询图书请求</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/book/&#123;bid&#125;"</span>,method=RequestMethod.GET)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getBook</span><span class="params">(@PathVariable(<span class="string">"bid"</span>)</span>Integer id) </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"查询到了"</span>+id+<span class="string">"号图书"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书删除</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/book/&#123;bid&#125;"</span>,method=RequestMethod.DELETE)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">deleteBook</span><span class="params">(@PathVariable(<span class="string">"bid"</span>)</span>Integer id) </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"删除了"</span>+id+<span class="string">"号图书"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 图书更新</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/book/&#123;bid&#125;"</span>,method=RequestMethod.PUT)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">updateBook</span><span class="params">(@PathVariable(<span class="string">"bid"</span>)</span>Integer id) </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"更新了"</span>+id+<span class="string">"号图书"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/book"</span>,method=RequestMethod.POST)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">addBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"添加了新的图书"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="从页面发起PUT、DELETE形式的请求-Spring提供了对Rest风格的支持"><a href="#从页面发起PUT、DELETE形式的请求-Spring提供了对Rest风格的支持" class="headerlink" title="从页面发起PUT、DELETE形式的请求? Spring提供了对Rest风格的支持"></a>从页面发起PUT、DELETE形式的请求? Spring提供了对Rest风格的支持</h2><p>（1）SpringMVC中有一个Filter；他可以把普通的请求转化为规定形式的请求；配置这个filter;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC中有一个Filter；他可以把普通的请求转化为规定形式的请求；配置这个filter; --&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>（2）如何发其他形式请求？</p>
<ul>
<li>按照以下要求：</li>
</ul>
<p>1、创建一个post类型的表单 </p>
<p>2、表单项中携带一<code>_method的</code>参数</p>
<p>3、这个<code>_method</code>的值就是DELETE、PUT</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 发送DELETE请求 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"book/1"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"delete"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"删除1号图书"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 发送PUT请求 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"book/1"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"put"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"更新1号图书"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>高版本Tomcat；Rest支持有点问题</li>
</ul>
<p>解决方案</p>
<p><img src="WechatIMG928.png"></p>
<h1 id="请求参数-数据绑定"><a href="#请求参数-数据绑定" class="headerlink" title="请求参数/数据绑定"></a>请求参数/数据绑定</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * SpringMVC如何获取请求带来的各种信息 默认方式获取请求参数： 直接给方法入参上写一个和请求参数名相同的变量。这个变量就来接收请求参数的值；</span></span><br><span class="line"><span class="comment">	 * 带：有值，没带：null；</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@RequestParam</span>：获取请求参数的；参数默认是必须带的；</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@RequestParam</span>("user")String username username =</span></span><br><span class="line"><span class="comment">	 *                             request.getParameter("user")</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@PathVariable</span>("user") </span></span><br><span class="line"><span class="comment">	 *                       /book/【&#123;user&#125;pathvariable】?【user=admin(requestparam)</span></span><br><span class="line"><span class="comment">	 *                       】</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 *                       value:指定要获取的参数的key required:这个参数是否必须的</span></span><br><span class="line"><span class="comment">	 *                       defaultValue:默认值。没带默认是null；</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@RequestHeader</span>：获取请求头中某个key的值； request.getHeader("User-Agent")；</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@RequestHeader</span>("User-Agent")String userAgent userAgent =</span></span><br><span class="line"><span class="comment">	 *                                    request.getHeader("User-Agent")</span></span><br><span class="line"><span class="comment">	 *                                    如果请求头中没有这个值就会报错； </span></span><br><span class="line"><span class="comment">	 *                                    value() required() defaultValue()</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@CookieValue</span>：获取某个cookie的值； 以前的操作获取某个cookie； Cookie[] cookies =</span></span><br><span class="line"><span class="comment">	 *                            request.getCookies(); for(Cookie c:cookies)&#123;</span></span><br><span class="line"><span class="comment">	 *                            if(c.getName().equals("JSESSIONID"))&#123; String</span></span><br><span class="line"><span class="comment">	 *                            cv = c.getValue(); &#125; &#125;</span></span><br><span class="line"><span class="comment">	 * value()</span></span><br><span class="line"><span class="comment">	 * required()</span></span><br><span class="line"><span class="comment">	 * defaultValue()</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/handle01"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">handle02</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			@RequestParam(value = <span class="string">"user"</span>, required = <span class="keyword">false</span>, defaultValue = <span class="string">"你没带"</span>)</span> String username,</span></span><br><span class="line"><span class="function">			@<span class="title">RequestHeader</span><span class="params">(value = <span class="string">"AHAHA"</span>, required = <span class="keyword">false</span>, defaultValue = <span class="string">"她也没带"</span>)</span> String userAgent,</span></span><br><span class="line"><span class="function">			@<span class="title">CookieValue</span><span class="params">(value=<span class="string">"JSESSIONID"</span>,required=<span class="keyword">false</span>)</span>String jid) </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"这个变量的值："</span> + username);</span><br><span class="line">		System.out.println(<span class="string">"请求头中浏览器的信息："</span> + userAgent);</span><br><span class="line">		System.out.println(<span class="string">"cookie中的jid的值"</span>+jid);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 如果我们的请求参数是一个POJO；</span></span><br><span class="line"><span class="comment">	 * SpringMVC会自动的为这个POJO进行赋值？</span></span><br><span class="line"><span class="comment">	 * 1）、将POJO中的每一个属性，从request参数中尝试获取出来，并封装即可；</span></span><br><span class="line"><span class="comment">	 * 2）、还可以级联封装；属性的属性</span></span><br><span class="line"><span class="comment">	 * 3）、请求参数的参数名和对象中的属性名一一对应就行</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * 提交的数据可能有乱码：</span></span><br><span class="line"><span class="comment">	 * 请求乱码：</span></span><br><span class="line"><span class="comment">	 * 		GET请求：改server.xml；在8080端口处URIEncoding="UTF-8"</span></span><br><span class="line"><span class="comment">	 * 		POST请求：</span></span><br><span class="line"><span class="comment">	 * 			在第一次获取请求参数之前设置</span></span><br><span class="line"><span class="comment">	 * 			request.setCharacterEncoding("UTF-8");</span></span><br><span class="line"><span class="comment">	 * 			自己写一个filter；SpringMVC有这个filter</span></span><br><span class="line"><span class="comment">	 * 			</span></span><br><span class="line"><span class="comment">	 * 响应乱码：</span></span><br><span class="line"><span class="comment">	 * 		response.setContentType("text/html;charset=utf-8")</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/book"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">addBook</span><span class="params">(Book book)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"我要保存的图书："</span>+book);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * SpringMVC可以直接在参数上写原生API;</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * HttpServletRequest</span></span><br><span class="line"><span class="comment">	 * HttpServletResponse</span></span><br><span class="line"><span class="comment">	 * HttpSession</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * java.security.Principal</span></span><br><span class="line"><span class="comment">	 * Locale：国际化有关的区域信息对象</span></span><br><span class="line"><span class="comment">	 * InputStream：</span></span><br><span class="line"><span class="comment">	 * 		ServletInputStream inputStream = request.getInputStream();</span></span><br><span class="line"><span class="comment">	 * OutputStream：</span></span><br><span class="line"><span class="comment">	 * 		ServletOutputStream outputStream = response.getOutputStream();</span></span><br><span class="line"><span class="comment">	 * Reader：</span></span><br><span class="line"><span class="comment">	 * 		BufferedReader reader = request.getReader();</span></span><br><span class="line"><span class="comment">	 * Writer：</span></span><br><span class="line"><span class="comment">	 * 		PrintWriter writer = response.getWriter();</span></span><br><span class="line"><span class="comment">	 * 		</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/handle03"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">handle03</span><span class="params">(HttpSession session,</span></span></span><br><span class="line"><span class="function"><span class="params">			HttpServletRequest request,HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		request.setAttribute(<span class="string">"reqParam"</span>, <span class="string">"我是请求域中的"</span>);</span><br><span class="line">		session.setAttribute(<span class="string">"sessionParam"</span>, <span class="string">"额我是Session域中的"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h2><ul>
<li><p>使用controller方法参数接收</p>
</li>
<li><p>使用java bean接收数据</p>
</li>
</ul>
<p>（1）简单数据</p>
<p>（2）复杂数据</p>
<blockquote>
<p>array</p>
<p>list</p>
<p>java bean</p>
<p>list\&lt;Object></p>
</blockquote>
<ul>
<li>全局String转Date - 配置</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.study.springmvc.converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.format.annotation.DateTimeFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Date d = sdf.parse(s);</span><br><span class="line">            <span class="keyword">return</span> d;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>applicationContext.xml 做如下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--启用Spring MVC的注解开发模式--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.format.support.FormattingConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.study.springmvc.converter.MyDateConverter"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="解决中文乱码"><a href="#解决中文乱码" class="headerlink" title="解决中文乱码"></a>解决中文乱码</h1><p>（1）get请求乱码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tomcat server.xml 增加 URLEncoding=UTF-8</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tomcat8 默认 utf-8编码</span></span><br></pre></td></tr></table></figure>
<p>（2）post请求乱码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> web.xml 配置配置CharacterEnchodingFilter</span></span><br><span class="line"></span><br><span class="line">    &lt;filter&gt;</span><br><span class="line">        &lt;filter-name&gt;charactorFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;</span><br><span class="line">        &lt;init-param&gt;</span><br><span class="line">            &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">            &lt;param-value&gt;UTF-8&lt;/param-value&gt;</span><br><span class="line">        &lt;/init-param&gt;</span><br><span class="line">    &lt;/filter&gt;</span><br><span class="line">    &lt;filter-mapping&gt;</span><br><span class="line">        &lt;filter-name&gt;charactorFilter&lt;/filter-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/filter-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>（3）response响应乱码</p>
<p>springContext.xml 中做如下配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--启用Spring MVC的注解开发模式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--解决中文乱码问题--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html;charset=utf-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/sorozy">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
